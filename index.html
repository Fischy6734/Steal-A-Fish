
<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Steal-a-Brainrot Collector</title>
<style>
  :root{ --bg:#0b1020; --panel:#0f1724; --accent:#10b981; --danger:#ef4444; --muted:#9ca3af; }
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto; margin:0; background:linear-gradient(180deg,#071021 0%, #071827 100%); color:#e6eef8; height:100vh; display:flex; flex-direction:column;}
  header{display:flex; justify-content:space-between; align-items:center; padding:12px 16px; background:rgba(255,255,255,0.05); position:sticky; top:0; z-index:50;}
  .brand{font-weight:700; letter-spacing:0.6px;}
  .balanceWrap{display:flex; align-items:center; gap:12px;}
  .balance{font-size:20px; font-weight:800;}
  .btn{background:var(--panel); padding:8px 12px; border-radius:8px; cursor:pointer; border:1px solid rgba(255,255,255,0.03); color:white;}
  .btn:active{transform:translateY(1px);}
  main{flex:1; display:flex; flex-direction:column; padding:16px;}
  #shopWrap{background:rgba(255,255,255,0.02); border-radius:12px; padding:12px; overflow:hidden; position:relative;}
  #shopLine{display:flex; gap:12px; align-items:center; white-space:nowrap; animation:scroll 20s linear infinite;}
  @keyframes scroll{from{transform:translateX(0)} to{transform:translateX(-50%)}}
  .shopItem{width:110px; min-width:110px; background:linear-gradient(180deg,#0d1b2a,#09202b); border-radius:10px; padding:8px; text-align:center; cursor:pointer; border:1px solid rgba(255,255,255,0.03); position:relative;}
  .thumb{height:70px; width:100%; border-radius:6px; background:#223; display:flex; align-items:center; justify-content:center; overflow:hidden; margin-bottom:6px;}
  .rarity{font-size:12px; color:var(--muted)}
  .price{font-weight:700; margin-top:6px}
  .floatingMsg{position:absolute; top:-22px; left:50%; transform:translateX(-50%); padding:4px 8px; border-radius:6px; font-weight:700; font-size:12px; pointer-events:none;}
  #inventoryBtn{position:fixed; top:70px; right:14px; z-index:30;}
  #inventoryModal{position:fixed; top:110px; right:14px; width:360px; max-height:70vh; overflow:auto; background:rgba(6,10,18,0.95); border-radius:12px; padding:12px; border:1px solid rgba(255,255,255,0.04); display:none; z-index:40;}
  .invItem{display:flex; gap:8px; align-items:center; padding:8px; border-radius:8px; background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent); margin-bottom:8px; cursor:pointer;}
  .invThumb{width:54px;height:54px;border-radius:8px; background:#234; display:flex; align-items:center; justify-content:center;}
  .invInfo{flex:1}
  .invName{font-weight:700}
  .invRarity{font-size:12px;color:var(--muted)}
  .invEarn{font-weight:700}
  .slotBar{display:flex; gap:8px; align-items:center; justify-content:space-between; margin-bottom:8px;}
  .collectAllBtn{margin-bottom:10px; width:100%; text-align:center;}
  footer{padding:12px; display:flex; gap:12px; align-items:center; justify-content:space-between; background:rgba(255,255,255,0.01);}
  .small{font-size:13px; color:var(--muted)}
  @media (max-width:480px){
    #inventoryModal{width:94vw; right:3%; top:114px;}
    .shopItem{width:92px; min-width:92px}
  }
</style>
</head>
<body>

<header>
  <div class="brand">Steal-a-Brainrot — Collector</div>
  <div class="balanceWrap">
    <div id="money" class="balance">$50</div>
    <button id="collectAllTop" class="btn">Collect All</button>
  </div>
</header>

<main>
  <div id="shopWrap">
    <div id="shopLine"></div>
    <div style="position:absolute;right:8px;bottom:8px;color:var(--muted);font-size:12px;">Click to buy • Double-click items in inventory to sell</div>
  </div>
</main>

<button id="inventoryBtn" class="btn">My PNGs (0)</button>

<div id="inventoryModal">
  <div class="slotBar">
    <div>Slots: <span id="slotCount">6</span>/<span id="slotMax">15</span></div>
    <div class="small">Next slot: <span id="nextSlotPrice">$1,000</span></div>
    <button id="buySlotBtn" class="btn">Buy Slot</button>
  </div>
  <button id="collectAllInv" class="btn collectAllBtn">Collect All Earnings</button>
  <div id="invList"></div>
</div>

<footer>
  <div class="small">Shop rotates items across the line. Replace placeholder images in the code with your PNGs.</div>
  <div><button id="resetBtn" class="btn">Reset Save</button></div>
</footer>

<script>
/* everything same as before except collect all additions */
const STARTING_MONEY = 60;
const STARTING_SLOTS = 6;
const MAX_SLOTS = 20;
const FIRST_SLOT_PRICE = 1000;
const SLOT_PRICE_INCREMENT = 2000;
const SHOP_VISIBLE_COUNT = 12;

const allItems = [
  {id:'c1', name:'Pixel Cat', rarity:'Common', price:10, incomePerSecond:0.2, image:'images/c1.png'},
  {id:'c2', name:'Smile Blob', rarity:'Common', price:12, incomePerSecond:0.25, image:'images/c2.png'},
  {id:'r1', name:'Skull Badge', rarity:'Rare', price:60, incomePerSecond:1.2, image:'images/r1.png'},
  {id:'r2', name:'Lil Ghost', rarity:'Rare', price:75, incomePerSecond:1.5, image:'images/r2.png'},
  {id:'e1', name:'Glowfox', rarity:'Epic', price:220, incomePerSecond:6, image:'images/e1.png'},
  {id:'l1', name:'Crown King', rarity:'Legendary', price:700, incomePerSecond:20, image:'images/l1.png'},
  {id:'ev1', name:'El-Tacho', rarity:'Event', price:350, incomePerSecond:5000, image:'ev1.jpeg'},
  {id:'m1', name:'Mythic Orb', rarity:'Mythic', price:2000, incomePerSecond:70, image:'images/m1.png'},
  {id:'s1', name:'Secret Sigil', rarity:'Secret', price:5000, incomePerSecond:220, image:'images/s1.png'}
];

const rarityWeights = { 'Common':60, 'Rare':22, 'Epic':10, 'Legendary':4, 'Event':8, 'Mythic':1, 'Secret':0.4 };
const rarityColor = { 'Common':'#6b7280','Rare':'#0ea5e9','Epic':'#7c3aed','Legendary':'#f59e0b','Event':'#06b6d4','Mythic':'#ef4444','Secret':'#f0abfc'};

let state = { money:STARTING_MONEY, slots:STARTING_SLOTS, owned:[], slotPurchases:0 };
const STORAGE_KEY = 'brainrot_save_v2';
function saveState(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); }
function loadState(){ const s=localStorage.getItem(STORAGE_KEY); if(!s) return; try{state=JSON.parse(s);}catch(e){} }

const moneyEl=document.getElementById('money');
const shopLine=document.getElementById('shopLine');
const invBtn=document.getElementById('inventoryBtn');
const invModal=document.getElementById('inventoryModal');
const invList=document.getElementById('invList');
const slotCountEl=document.getElementById('slotCount');
const nextSlotPriceEl=document.getElementById('nextSlotPrice');
const buySlotBtn=document.getElementById('buySlotBtn');
const collectAllTop=document.getElementById('collectAllTop');
const collectAllInv=document.getElementById('collectAllInv');

function showFloating(el,text,ok=true){const msg=document.createElement('div');msg.className='floatingMsg';msg.style.background=ok?'rgba(16,185,129,0.95)':'rgba(239,68,68,0.95)';msg.textContent=text;el.appendChild(msg);setTimeout(()=>msg.remove(),1200);}
function fmt(n){return '$'+(Math.round(n*100)/100);}

function weightedPick(){const pool=[];for(const it of allItems){const w=rarityWeights[it.rarity]||1;const count=Math.max(1,Math.round(w*10));for(let i=0;i<count;i++) pool.push(it);}return pool[Math.floor(Math.random()*pool.length)];}
function generateShopArray(count){const arr=[];for(let i=0;i<count;i++){const base=weightedPick();arr.push(Object.assign({},base,{uid:base.id+'_'+Math.random().toString(36).slice(2,8)}));}return arr;}
let currentShop=generateShopArray(SHOP_VISIBLE_COUNT*2);
function renderShop(){shopLine.innerHTML='';currentShop.forEach(item=>{const el=document.createElement('div');el.className='shopItem';const thumb=document.createElement('div');thumb.className='thumb';const img=document.createElement('img');img.src=item.image;img.style.maxWidth='100%';img.style.maxHeight='100%';thumb.appendChild(img);el.appendChild(thumb);const nm=document.createElement('div');nm.textContent=item.name;nm.style.fontSize='13px';nm.style.fontWeight='700';el.appendChild(nm);const rar=document.createElement('div');rar.className='rarity';rar.textContent=item.rarity;el.appendChild(rar);const pr=document.createElement('div');pr.className='price';pr.textContent=fmt(item.price);el.appendChild(pr);el.addEventListener('click',()=>{handleBuy(item,el);});shopLine.appendChild(el);});}
renderShop();
setInterval(()=>{currentShop=currentShop.slice(3).concat(generateShopArray(3));renderShop();},8000);

function handleBuy(item,el){const free=state.slots-state.owned.length;if(free<=0){showFloating(el,'No slots',false);return;}if(state.money>=item.price){state.money-=item.price;const owned={uid:item.uid,itemId:item.id,name:item.name,rarity:item.rarity,incomePerSecond:item.incomePerSecond,price:item.price,earned:0,image:item.image};state.owned.push(owned);saveState();updateUI();showFloating(el,'Purchased',true);}else{showFloating(el,'Not enough',false);}}

function updateUI(){moneyEl.textContent=fmt(state.money);invBtn.textContent=`My PNGs (${state.owned.length})`;slotCountEl.textContent=state.slots;nextSlotPriceEl.textContent=fmt(getNextSlotPrice());renderInventory();}
function renderInventory(){invList.innerHTML='';if(state.owned.length===0){invList.innerHTML='<div class="small" style="padding:8px;color:var(--muted)">You own no PNGs.</div>';return;}state.owned.forEach((o,idx)=>{const row=document.createElement('div');row.className='invItem';const t=document.createElement('div');t.className='invThumb';const img=document.createElement('img');img.src=o.image;img.style.maxWidth='100%';img.style.maxHeight='100%';t.appendChild(img);row.appendChild(t);const info=document.createElement('div');info.className='invInfo';const nm=document.createElement('div');nm.className='invName';nm.textContent=o.name;info.appendChild(nm);const r=document.createElement('div');r.className='invRarity';r.textContent=`${o.rarity} • ${fmt(o.incomePerSecond)}/s`;info.appendChild(r);row.appendChild(info);const earn=document.createElement('div');earn.className='invEarn';earn.textContent=fmt(o.earned||0);row.appendChild(earn);row.addEventListener('click',()=>{if(o.earned>0){state.money+=o.earned;o.earned=0;saveState();updateUI();showFloating(row,'Collected',true);}else{showFloating(row,'No earnings',false);}});row.addEventListener('dblclick',()=>{if(confirm(`Sell ${o.name}?`)){state.owned.splice(idx,1);saveState();updateUI();showFloating(row,'Sold',true);}});invList.appendChild(row);});}

setInterval(()=>{for(const o of state.owned){o.earned=(o.earned||0)+(o.incomePerSecond||0);}saveState();const earns=document.querySelectorAll('.invEarn');state.owned.forEach((o,i)=>{if(earns[i]) earns[i].textContent=fmt(o.earned||0);});},1000);

function getNextSlotPrice(){return FIRST_SLOT_PRICE+state.slotPurchases*SLOT_PRICE_INCREMENT;}
buySlotBtn.addEventListener('click',()=>{const price=getNextSlotPrice();if(state.slots>=MAX_SLOTS){alert('Max slots');return;}if(state.money>=price){state.money-=price;state.slots+=1;state.slotPurchases+=1;saveState();updateUI();showFloating(buySlotBtn,'Slot +1',true);}else{showFloating(buySlotBtn,'Not enough',false);}});

invBtn.addEventListener('click',()=>{invModal.style.display=invModal.style.display==='block'?'none':'block';renderInventory();});
document.addEventListener('click',e=>{if(!invModal.contains(e.target)&&!invBtn.contains(e.target)){if(invModal.style.display==='block')invModal.style.display='none';}});

document.getElementById('resetBtn').addEventListener('click',()=>{if(confirm('Reset save?')){localStorage.removeItem(STORAGE_KEY);location.reload();}});

function collectAll(){let total=0;for(const o of state.owned){if(o.earned>0){total+=o.earned;o.earned=0;}}if(total>0){state.money+=total;saveState();updateUI();showFloating(moneyEl,`+${fmt(total)}`,true);}else{showFloating(moneyEl,'No earnings',false);}}
collectAllTop.addEventListener('click',collectAll);
collectAllInv.addEventListener('click',collectAll);

loadState();if(!localStorage.getItem(STORAGE_KEY)){state.money=STARTING_MONEY;state.slots=STARTING_SLOTS;state.owned=[];state.slotPurchases=0;saveState();}
updateUI();
</script>

</body>
</html>
